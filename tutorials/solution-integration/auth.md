---
title: Authorization on Fortellis
author: Kelly Rich
last updated: 3/28/2022
---

When DMS users interact with Fortellis apps, user authorization is validated at a couple of points in the flow between the app and the activity on the DMS servers.

Fortellis makes use of [OAuth 2.0](https://oauth.net/2/), [OpenID Connect](https://openid.net/connect/), and [JSON Web Tokens](https://jwt.io), industry standards, as the authorization architecture for all requests made to the Fortellis APIs.

## Authorization in Fortellis Workflows

Between the apps running on end-user terminals and the DMS databases, the flow passes from the DMS user, through the app, through the API Gateway, and on to the API services that interact with the DMS.

To complete this flow, the DMS user must successfully sign in to the app to authorize their access to it. Then, when the app user makes an action that results in a call to a Fortellis API, the API request must be authorized by the API Gateway (using the Subscription ID) before it routes the request to the API service. When the request reaches the API service, it is again authorized via user's Subscription ID, plus the accompanying OAuth access token that was generated by the app using its Fortellis-assigned credentials.

In addition to the authorization used between a DMS user and the DMS, an app can also use a *webhook* to validate the access tokens sent with messages from an asynchronous API. For more on asynchronous APIs and the authorization used with webhooks, see [Asynchronous API Overview](/docs/tutorials/event-relay/overview-event-relay).

## Supported Authorization Flows

Fortellis supports several of the token flows defined in the OAuth 2.0 standard. Depending on the type of app they're building, App Developers can implement one of several different OAuth flows to authorize access to an API.

| OAuth 2.0 Flow | Usage |
|----------------|-------|
| **Client Credentials Flow** | Your app obtains Bearer tokens from the Fortellis token server which your app uses to make calls to the Fortellis APIs. |
| **Authorization Code Flow** | Your app combines its API Key with the user's consent to get an authorization code from Fortellis. The authorization code is then used to get a Bearer and Refresh tokens from the Fortellis token server. |
| **Implicit Grant Flow** | Your app combines the user's Subscription ID and a Bearer token generated by the Fortellis token server using the app's own **API Key**. API consumers sign in through Fortellis. |

In addition to these OAuth flows, you can also register an API with these additional types of authorization:

* Custom OAuth implementation
* API Key and Secret

For more on these individual flows, see the other tutorial topics in the left nav of this section.

> **Note:** Although Fortellis offers support for the *authorization code flow* and the *implicit grant flow*, Fortellis does not offer security for these flows in the context of JavaScript apps and single page apps.

For more on configuring your API with these authorization methods, see [Access Control](/docs/tutorials/api-lifecycle/registering-apis/#access-control).

## Apps and API Requests

Every Fortellis API request an app makes must include both the user's *Subscription ID* and an OAuth *Bearer token* in the header of the request.

For App Developers, we recommend you have users sign in to your app using an authorization method of your choice. Then, once signed in, retrieve the user's Subscription ID and combine that with your app's credentials to retrieve a Bearer token using the client credentials flow. Then make the API request using the Subscription ID and your Bearer token.

### App Authorization Flow Details

* App Developers select how they want to authorize user access to their app
* App Developers include the app Subscriber ID with their API requests
* App Developers use their app's OAuth credentials to generate a Bearer token for their app's API requests

OAuth provides specific authorization flows for users accessing different systems without using a shared set of sign in credentials. These tutorials demonstrate how to use different OAuth flows in Fortellis apps:

* [Client Credentials Flow](/docs/tutorials/solution-integration/client-credentials-flow)
* [Implicit Grant Flow](/docs/tutorials/solution-integration/implicit-flow)
* [Authorization Code Flow](/docs/tutorials/solution-integration/authorization-code-flow)
* [Refresh Token Flow](/docs/tutorials/solution-integration/authorization-code-flow/#refresh-tokens)

### An Example Bearer Token Response

When you use Fortellis tokens, you make calls to the Fortellis token server to retrieve the Bearer tokens for your API requests. Here's an example response with a newly minted token:

```json
{
    "token_type": "Bearer",
    "expires_in": 3600,
    "access_token": "eyJraWQiOiJ6Z3cyUV9jRDJ2N0tCVENINUgzM3hQeXNUN2pLRVEtR3pQdFNLUi1vRXZRIiwiYWxnIjoiUlMyNTYifQ.eyJ2ZXIiOjEsImp0aSI6IkFULm10blB3NFdINUwxbUl5dDhoLUlEUi1XOVlqekxCNlRadFBNVDQ0Q1dlNHMiLCJpc3MiOiJodHRwczovL2lkZW50aXR5LWRldi5mb3J0ZWxsaXMuaW8vb2F1dGgyL2F1czFuaTVpOW45V2t6Y1lhMnA3IiwiYXVkIjoiYXBpX3Byb3ZpZGVycyIsImlhdCI6MTU2NjMxNjYzMCwiZXhwIjoxNTY2MzIwMjMwLCJjaWQiOiJObHRjdXdJdFpWdmI3VEZ6RzV1QkNubEdZWDFyUzRuUyIsInNjcCI6WyJhbm9ueW1vdXMiXSwic3ViIjoiTmx0Y3V3SXRaVnZiN1RGekc1dUJDbmxHWVgxclM0blMifQ.Qo-YoGHHytdZApI4I_ovsTdxtAdeJd4utvUhAogVq2HZ6b0BS83Uq5fRLji4kCf4P-H3tDez_0RqwRWFIgObWs-6nQFrXbX84QwGv2u5-p-4Rz2naZIWn7Zmb7M7HBfb2LjN2dnzxGKrc9-QRXLDzJvTDUlfn7ZeL3U9AwEimLGsrWHftW31GelcU4YECFO1OABqNhWSEv9NJbkPfxHBNvyHh_AcXdVjRHZvfLXj-Md4GJJNKSPIYvjmZvl9dsY-v7ZPI-GqD4jBOTthSUQogy1D1lYBU6ZWm0BSieIpzK3l_xjZLO6yG1aAYDN7652kNemNEX4QwKzoE-uNn323Og",
    "scope": "anonymous"
}
```

**Note:** OAuth tokens are valid for the lifespan indicated by the token's **expires_in** value. Fortellis tokens expire in `3600` seconds, meaning they are valid for one hour. Once a token is expired, it is no longer valid and you must fetch a new token.
